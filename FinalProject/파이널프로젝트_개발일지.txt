----10월 13일---

처음으로 문제 발생.

코드화를 적용시켜보기로 했는데, 
막상 테이블을 봐도 완벽히 이해가 가지 않았다.

코드화 관리 테이블을 하나로 두기로 결정했다보니까 그런 것 같다.
(보통은 공통코드관리 테이블이 있고, 코드종류별로 세부테이블도 따로 있는 편)



결론적으로 중요한 포인트는

1. 코드 관리 테이블에 PK 설정을 어떻게 해야하고, 컬럼을 어떻게 정해야 할지.
2. 코드 관리 테이블과 다른 테이블들이 어떻게 참조로 엮어질 수 있는가



멘토님의 답을 듣고
참고자료(테이블 구조)와 같이 구현하는 법을 배웠다.

문제 원인:
코드 테이블을 참조하려고 했던 것이 원인.

단순히 생각하면, 코드 테이블은 사전같은 거고.
다른 테이블은 그 사전을 사용하기만 할 뿐,
직접적으로 참조할 일은 없었던 거다.

결론: 반드시 테이블끼리 엮어져야 한다고 생각한 기존방식이 화근이었다.


--10월 16일 --


1. DDL 쿼리문 
파일별로 저장해서 가지기
- 추가하거나 나중에 코멘트할 때 용이


2. 주소API
우편번호
기본주소
상세주소
3 컬럼으로 분류(인사관리,거래처)

아파트 몇층 등등 직접 입력하는 칸으로 
->제공하는 지역코드있음

지역구분코드 삭제

3. AS-IS 
기존의 것

TO-BE
기존의 것에서 변형될 내용


4. 데이트는 서버 날짜로
sysdate
(출퇴근)

5. 프로그레스 태그 사용

캘린더도css있음


6. 스마트 에디터
토스트 UI 에디터 참고

이미지 업로드 시 base64로 인코딩

섬머노트
이미지 업로드 시 서버에 물리파일 저장
경로 읽어서 파일 가져옴



todolist - 템플릿 응용

7. 비밀번호 - 단방향 

비밀번호 찾기
임시비번
단방향에서 사용
hash
Bcrypt

8. PDF

전자결재 승인났을때
PDF형식으로 다운 가능하게 

HTML 을 PDF로 변환하는 오픈소스

-- 10월 17일 -- 

화면 설계에 들어갔다.
카카오톡 오븐 API를 활용했으며, 
전자결재 + 공지사항 게시판 + Todolist + 코드 관리까지 하니
15페이지가 나왔다.


---10 22일---
- 내 결재 관리 : 해당 아이디(사번)와 관련된 결재자료만 나옴
- 기안서 통합관리 : 전부 나옴

기본 템플릿이 제공하는 아이콘만으론 부족해서 
구글 아이콘 추가함

링크:
https://fonts.google.com/icons


CDN 한줄만 추가해주면됨
```
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <p class="regular">Montserrat Regular 400</p>
    <p class="medium">Montserrat Medium 500</p>
    <p class="bold">Montserrat Bold 700</p>
  </body>
</html>
Colored by Color Scripter

```

- 문서 양식
문서양식을 만드려면 id가 있어야함.
사원이라고 해야겠다.

그럼 insert구문은 ...
짜려고 하는데 문제 발생.

1. 문서양식이 APPROVAL_NO를 참조하고 있었다.
2. 어느게 맞는거지? 하다가
생각해보니 문서양식이 있어야 결재를 하는 것이 가능했다.

고로.
문서양식 자체는 결재 이전에 존재해야 하고,
테이블이 존재해야하니까.
먼저 만들어져있어야한다.

결론: 따라서 결재 테이블이 문서양식 테이블을 참조해야하지
그런 생각을 가지고 컬럼들을 변경해주었다.


- 컬럼 ADD
DB는 기본적으로 뒤에서 추가되지만 마리아디비의 경우.
FIRST AFTER 옵션을 지원하고 있었다.

그래서
```
ALTER TABLE APPROVAL_TYPE ADD APPROVAL_TYPE_NO BIGINT AFTER EMPLOYEE_ID;

```
이런 식으로 어떤 컬럼 뒤에 올지 순서를 정할 수 있다.

























































 INSERT INTO APPROVALTYPE(APPROVAL_TYPE_NO, EMPLOYEE_ID,APPROVAL_FORM,APPROVAL_TYPE_CD,REG_ID,REG_DATE,REG_MENU,MOD_ID,MOD_DATE,MOD_MENU)
        VALUES(NULL,#{EMPLOYEE_ID},#{APPROVAL_FORM},#{APPROVAL_TYPE_CD},#{REG_ID},#{REG_DATE},#{REG_MENU},#{MOD_ID},#{MOD_DATE},#{MOD_MENU})






















---10월25일--

ztree 

list : approvalType=code
totalList

-- 10월 23일 --

이번주 TodoList
- 전자결재 내용 넣고 페이징 처리하고 문서양식함 추가,문서양식함 리스트,문서(결재) 양식들 추가




상위양식함을 둬서
문서를분류하려면
전체
-결재
-보고서
-기타
   

등등 될거같다
그렇다면 이를 구분할 컬럼이 필요하다.
UP_CD란 이름을 붙여서 추가해줘야한다.

일단 보류.
나머지것들 되면
추가하기로


토스트UI를 깔았으니
커스터마이징해주기로 했다.
컬러피커가 기본적으로없어서 넣어줘야 한다



문서양식함 관리 add할때
코드테이블에도 insert를 해야됨


UP_CODE와 
CODE_NAME필요함

CODE에는 실제 +auto-increment들어감

고정 SQL문
INSERT INTO VALUES(REG_ID,REG_DATE,REG_MENU,MOD_ID,MOD_DATE,MOD_MENU)




----10월  25일 -----

CodeVO에 대한
문제...

commonsVO를 두는게 맞는가

아니면 CodeVO를 전부 상속받는게 맞는가

일단은 후자가 편하긴한데

조인이나
add의 경우 어떨까

실제로 해보니 괜찮았다.

훨씬 편해졌고 아직 문제가 생기는 곳도 없었다.

자세한 사항은 멘토분에게 물어보기로 했다.




하나를 체크하면 나머지 형제노드의 체크는 해제하려고 했는데


console.log(treeId)
	console.log(treeNode)
	
	nodes=treeNode.getParentNode();
	console.log(nodes)
	console.log(nodes.children)
	let childArr=nodes.children
	for(let i in childArr){
		if(treeNode.name!=childArr[i].name){
			childArr[i].checked=false;
			
               }
	}
왜인지 안굴러간다
 var setting = {
view: {
		selectedMulti: false,
		
	}
}
를 설정해도 마우스를 그 위에 올리면 자동으로 체크가 되었다.
이를 방지하기 위해서  다른 방식을 찾았다. ztree가 아닌 일반 자바스크립트 문법을 쓰기로 했다.
siblings()함수를 처음 써봤는데,
콘솔에 S.fn.init(4)이란 오브젝트 타입이 리턴되었다.

어떻게 값을 꺼내거나 활용하는지 몰랐는데, 검색해보니 이는
jquery 객체라는 녀석이고
https://api.jquery.com/
여기서 문서를 보면서 사용법을 익혀나갈 수 있단 걸 알았다.

꺼내는 법은 대강 이러했다.

```

for (let i=0; i<otherNodes.length; i++){
		node=otherNodes.get(i);
		console.log(node);
	}
```




HTMLCollection타입으로 나오고
다시 HTMLCollection.item()으로꺼내고의 반복

기나긴 시간 끝에 성공했다.


```

function myOnCheck(event, treeId, treeNode) {
	
    
	
	otherNodes = $('#' + treeNode.tId).siblings();
	
	
	for (let i=0; i<otherNodes.length; i++){
		node=otherNodes.get(i);
		
		span=node.children.item(1)
		span.className='button chk checkbox_false_full';
		
	}
nodes=treeNode.getParentNode();
	
	let childArr=nodes.children
	for(let i in childArr){
		if(treeNode.name!=childArr[i].name){
			childArr[i].checked=false;
			
               }
	}
}
최종 해결 코드는 위와 같았다.



---10월 26일----

어제 체크가 끝나서